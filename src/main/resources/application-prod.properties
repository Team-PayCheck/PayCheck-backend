spring.application.name=paycheck

# MariaDB Database Configuration (CloudType)
# rewriteBatchedStatements=true: JDBC 드라이버가 개별 INSERT를 Multi-row INSERT로 변환하여 배치 성능 향상
spring.datasource.url=${DATABASE_URL:jdbc:mariadb://localhost:3306/paycheck?useSSL=false&serverTimezone=Asia/Seoul&createDatabaseIfNotExist=true&rewriteBatchedStatements=true}
spring.datasource.driverClassName=org.mariadb.jdbc.Driver
spring.datasource.username=${DATABASE_USERNAME:root}
spring.datasource.password=${DATABASE_PASSWORD:}

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.MariaDBDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# Hibernate Batch Configuration
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method

# JWT Configuration
jwt.secret=${JWT_SECRET:7K3mJ9pL2xR8vN4qT6wY1sF5hB0gD3aZ8cM7nE2kX9tV4rU6iO5jP1lW3yH8qA2}
jwt.expiration=1800000
jwt.refresh-expiration=1209600000

# Kakao OAuth
kakao.oauth.user-info-url=https://kapi.kakao.com/v2/user/me

# Holiday API Configuration
holiday.api.key=${HOLIDAY_API_KEY:}

# NTS Business Status API Configuration
nts.business-status.enabled=true
nts.business-status.base-url=https://api.odcloud.kr/api
nts.business-status.status-path=/nts-businessman/v1/status
nts.business-status.service-key=${NTS_SERVICE_KEY:}

# Cache Configuration
spring.cache.type=simple
spring.cache.cache-names=holiday-check,holidays-by-year

# Jackson Configuration
spring.mvc.converters.preferred-json-mapper=jackson
spring.http.converters.preferred-json-mapper=jackson

# Server Configuration
server.port=${PORT:8080}

# ==========================================
# 프로덕션 배포 환경 설정 (spring.profiles.active=prod)
# ==========================================

# Cookie Configuration - 배포 HTTPS 환경
# SameSite=None: 로컬 FE(localhost)와 배포 BE(cloudtype.app) 크로스 사이트 조합 허용
# Secure=true: SameSite=None은 반드시 Secure=true와 함께 사용해야 함
cookie.secure=true
cookie.same-site=None

# CORS Configuration - 환경변수 필수 주입 (예: CORS_ALLOWED_ORIGINS=https://your-frontend.vercel.app,http://localhost:5173)
# 반드시 배포 시 실제 프론트엔드 도메인을 환경변수로 설정해야 합니다. 미설정 시 애플리케이션이 시작되지 않습니다.
cors.allowed-origins=${CORS_ALLOWED_ORIGINS}

# Encryption Configuration - 반드시 환경변수로 주입
encryption.aes-key=${ENCRYPTION_AES_KEY}

# JPA Configuration - prod 환경 최적화
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=none

# Lazy Initialization: 시작 시 모든 빈을 한 번에 초기화하지 않고 요청 시 초기화
# Hibernate 6 ANTLR4 파서의 시작 시 메모리 스파이크 방지
spring.main.lazy-initialization=true
